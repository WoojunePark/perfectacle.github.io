---
title: (보안) 대칭/비대칭 키 알고리즘
tags:
categories: 
---
이번 포스트에서는 평문의 데이터를 암호화/복호화 하는 방법에 대해서 이해해보자.  
사람이 알아볼 수 있는 데이터를 평문(plain text)라고 말하고, 평문을 암호화한 걸 암호문(cipher text)라고 부른다.  
수학적 원리를 알아보는 것도 아니기 때문에 간단하게만 정리해봤다.

## 키(KEY)
암호화/복호화 할 때 핵심 역할을 한다.  
예를 들면 `알파벳 순서를 3칸 땡겨라`와 같은 키가 있을 때 키는 두 가지 관점에서 바라볼 수 있다.  
1. 알파벳 순서를 땡겨라/밀어라 - 알고리즘  
암호화 할 때 땡겨라 였으면 복호화 할 때는 밀어라 가 된다.
2. 3칸 - 비밀번호  
비밀번호에 따라서 동일한 알고리즘이지만 암호화 했을 때 다른 값이 나온다.

동일한 알고리즘을 사용했다고 해서 항상 동일한 키가 생성되는 게 아니고, 동일한 패스워드를 사용했다고 해서 동일한 키가 생성되는 게 아니다.  
대부분의 경우에는 수학적 원리를 따지지 않고, 보안상 이슈가 없는 알고리즘을 그냥 선택하기 마련이라서 개발자들이 선택하는 알고리즘은 비슷한 걸 많이 쓰는 걸로 알고 있다.  
알고리즘만 가지고 키를 유추할 수 있다면 웬만한 서비스들의 보안은 구멍 투성이었을 것이다. 

## 대칭키 알고리즘
암호화/복호화 할 때 사용하는 키가 동일한 경우를 말한다.  
(triple)DES(Data Encryption Standard, 많이 취약한 것으로 알려짐), AES(Advanced Encryption Standard) 등등이 있지만  
AES256 CBC를 가장 많이 쓴다.  
국내에서 만든 걸로는 SEED, ARIA 등등이 있다.  
위 알고리즘은 세 가지 구분으로 나눠서 볼 수 있다.  
1. AES - 알고리즘
2. 256 - 키의 길이를 나타냄.
3. CBC(cipher-block chaining) - 자세한 링크는 [블록 암호 운용 방식](http://brownbears.tistory.com/302)를 참조

암호화/복호화 관련해서 실습을 해볼 때는 [OpenSSL](https://www.openssl.org/)을 이용하면 매우 간편하다.  
```bash
echo "LOVE" | openssl enc -aes-256-cbc -a
```
위 명령어를 치고 비밀번호를 입력하면 해당 키를 가지고 암호화 된 텍스트가 나온다.  

암호화 된 텍스트를 평문으로 복호화 할 때는 아래 명령어를 입력하면 된다.  
```bash
echo "U2FsdGVkX1+3CGPrtP48HYcpt1x2jMB3ZlvUnpLP6H4=" | openssl enc -aes-256-cbc -a -d
```
비밀번호를 잘못입력하면 `bad decrypt`와 같은 문구가 나올 것이고, 비밀번호를 잘 입력하면 올바른 키로 복호화 된 LOVE란 평문을 볼 수 있다.

이렇듯 암호화/복호화 할 때 동일한 키를 사용하는 것을 대칭키라고 부른다.  
대칭키는 암호화 연산 속도가 빠르다는 장점을 가지고 있다.  
하지만 내가 어떤 키로 암호화를 했다면 수신자도 같은 키를 가지고 있어야한다.  
그러기 위해서는 둘이 실제로 만나서 암호화에 쓰였던 키를 교환해야한다.  
하지만 이 과정에서 중간에 제 3자가 개입해서 키를 몰래 엿보거나 조작을 할 수 있다.  
이런 행위를 [중간자 공격(man in the middle attack)](https://ko.wikipedia.org/wiki/%EC%A4%91%EA%B0%84%EC%9E%90_%EA%B3%B5%EA%B2%A9)이라고 부른다.  

## 비대칭키 알고리즘
대칭키의 키 관리가 매우 취약하다는 문제를 해결하고자 등장한 방식이다.  
대칭키와 반대로 암호화 할 때 사용하는 키와 복호화 할 때 사용하는 키가 다른 경우를 말한다. 